0 'DO2BA.100 -- BA loader for DO2BA.CO, a machine-language program to load BA programs from DO version without requiring both in memory at same time.
1 'Translation of James Yi's DO2BA.200. Phil Wheeler -- 71266,125 [6/29/88]
2 GOSUB99
3 PRINT@42,"Enter end address";:PRINT@82,"<ENTER> for just below current HIMEM"
4 Y="":PRINT@122,SPACE$(30);:PRINT@122,;:INPUTY:IFY=""THENB=HIMEM-E-1ELSEB=VAL(Y)-E
5 IFB>=MAXRAM-ETHENBEEP:GOTO4ELSECLEAR256,B:B=HIMEM:GOSUB99
6 CLS:A=B:C=B+E:D=D+B:S=99:M=99:PRINT@48,"Line";:PRINT@88,"Address";
7 GOSUB60:IFO=0THENPOKEA,K:A=A+1:GOTO7
8 P=K:GOSUB60:G=P+256*K+B:P=INT(G/256):Q=G-P*256
9 POKEA,Q:A=A+1:POKEA,P:A=A+1:GOTO7
40 SAVEM"DO2BA",B,C,D:MENU
50 U=INSTR(1,Z,MID$(Y,M,1)):IFU=0THEN55
51 IFU>16THENU=U-16:O=1ELSEO=0
52 V=INSTR(1,Z,MID$(Y,M+1,1)):IFV=0ORV>16THEN55
53 K=(U-1)*16+V-1:RETURN
55 BEEP:PRINT@165,"Bad character";:END
60 IFM<N*2+5THEN70
61 IFL<>RTHENBEEP:PRINT@165,"Checksum fail";END
62 READY:M=1:GOSUB50:IFK=0THEN40
63 S=S+1:PRINT@70,S;:PRINT@110,A;:N=K:M=3:GOSUB50:M=5:L=K:GOSUB50:L=K*256+L:R=0
70 M=M+2:GOSUB50:R=R+K:RETURN
99 DEFINTI-X:DEFSTRY-Z:Z="0123456789ABCDEFGHIJKLMNOPQRSTUV":CLS:E=502:D=0:RETURN
100 DATA38FC172AB6FB380015DFDAH50021B160CD91573E01C3165321OB01CD9157CD3A1FCD462121QD01CD9157CD3E46D7C8CDFA21CD0B4CCDA020CAI100
101 DATA38A618E5EB22U901E5CD2D6BC10823E5C5444D2AAEFBE52B13D90922UB01C1E10822U701E1C5CAP5007CB5CAP5002425444DCAMD0001000108E52A
102 DATA387F1EU9011181F6C5D5E5CDDD2E22U901EB1B2AU701444DE12BCDE66B23EBE1C1CDDD2EE1C3LE002A9AF922U501E1CD7676E57ED61ACAR00023FE
103 DATA38971BF3C2Q0002B36002332QC01B73600C49E19E3E52BD7E1DATA00CAT600CD9157CD29423AA2FFE602CAT600CDJ001C7D1C3GC01CDEB08EB22V5
104 DATA38431701EBCD4606D12AU50101V3013E04F5CDM0010A772303F13DC2UE000181F6CDM0010A772303B7C2VE0022U501EB3AQC01B7C2PC00CDJ001CD
105 DATA38AC174621E1CDN701CD9C6C2A9AF9227CF621UD01222CF6C31B1F2AUB01EB2AU501CDM001360023CDM00136002322AEFBDFCALD017EFE1ACAL701
106 DATA38E517B7C2L901360D23360A23C3K601361AC9DFD8D5C5010100CD6D6BC1D113E52AUB012322UB01E1C97E235E23562B2BFEC0CABF1FFE80CA1720
107 DATA38B411C3D91F20202A2A205465787420746F20426173696320436F6E766572746572202A2A0D0A005072657373203C4354524C3E20746F20627265
108 DATA37E20E616B2066726F6D206572726F722E0D0A4C6F61642066726F6D205B3C43523E3D457869745D00000000000000004D656E750D0000FF0000
109 DATA00
