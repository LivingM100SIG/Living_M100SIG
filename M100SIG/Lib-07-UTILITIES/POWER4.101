               POWER4.101 file by     R. V. Getsla  74405,1177
               Last update: 19 MAY 85               Rev.   1.0
               -----------------------------------------------

     First  of all,  I received a request for more detail on the  drawing  for 
connecting solar cells and a rechargeable battery to the model 100, so here it 
is.

     +++++++++++++++++++++++++++++++++++++++++++++++++++++++++(positive side)
 (sleeve)              |                                     |
Model 100           battery                           solar panel
 (center)              |                                     |
     ----------------------------diode here-------------------(negative side)

                                           (band on solar side)

Be  sure you solar array has the proper voltage and current ratings to  charge 
the battery you plan on using. See the POWER4.100 file in DL 4.

               -----------------------------------------------

     This is the second in a,  hopefully, continuing series of articles on the 
hardware  inside and outside of the TRS-80 Model 100.  Presently geared to the 
user  who is curious about how it all fits together and can manage to wield  a 
soldering  iron  with  aplomb,  if not skill,  though at this time  I  do  not 
contemplate you needing one, unless you are as brave as I am ... a qualitative 
decision on your part.

     The  first item of interest is the internal NiCd battery which keeps  the 
RAM  and clock chips alive while you change the AA cells or otherwise  deprive 
the  main circuits of a power source.  The memory power internal battery is  a 
small nickel-cadmium bank of 3 cells.  It seems that its only function in life 
is to supply the power for the RAM and internal clock chips in the event  that 
it  is  not coming from one of the other two sources  available.  It  "floats" 
across  the internal power bus all of the time that the memory power switch is 
ON  through a diode to prevent it discharging through the main  power  supply, 
and  a  current  limiting resistor.  If a power source  is  available,  it  is 
continuously being trickle charged,  current limited by the resistor mentioned 
above.  The  internal power bus can get its power from either the internal  AA 
cells OR from the external DC connection that the AC adapter plugs into.  When 
you  plug the AC adapter into the side,  there is a switch which feels for the 
plug  and  disconnects the AA cells and connects the plug  to  the  bus.  This 
switch  has been known to cause some people grief because the springiness  can 
go  out  of it and it will fail to make contact with the AA cells when the  AC 
adapter plug is removed (Thanks to Janet McC & others).  There are two ways to 
fix  this.  First,  replace it,  and second,  carefully bend it so  it  works. 
Bending it will not be permanent as it will eventually repeat the same type of 
failure. If you are a bit queasy about surgery on your Model 100, then arrange 
for RS to do it at probably a pretty steep cost out of pocket,  otherwise have 
them  order  RS part# AJ-7338,  manufacturers part# YJB03S001Z and install  it 
yourself, being careful to arrange the wiring the same way, of course. In over 
a  year  of plugging and unplugging mine lots and lots of times,  it  has  not 
failed me .....  yet. Anyway, there is a momentary loss of power when you plug 
in the adapter,  since the switch first breaks the connection to the AA cells, 
then makes the connection to the plug as you push it in.  The opposite happens 
when you unplug it.  It is done this way to avoid shorting either the AA cells 
or the AC adapter. Since the AC adapter plug has disconnected the AA cells, it 
is  therefore important to plug the adapter into the wall!  If the adapter  IS 
plugged  into the side connection,  and NOT plugged into the  wall,  or  110AC 
power is not being supplied,  then, you are running the memory only from those 
little  NiCd  cells!  The technical reference manual gives the RAM life  under 
internal NiCd power only,  as 40 days if only 8K is installed,  and 10 days if 
32K  is installed.  Referring to the memory effect mentioned in  the  previous 
file,  it  seems to me to be a good idea to exercise these little beasties  to 
ensure  they  will retain thier rated capacity.  What this means is  that  you 
would  have to wait a LONG time without AA cells installed for it to drain the 
internal  NiCds.  From  a  practical point of view,  this  is  not  practical. 
Instead,  I  suggest running the thing till it drops off the line on its  own. 
This hopefully will exercise the internal NiCds enough to retain some or  most 
of  thier  capacity.  If  all else fails,  have RS order  RS  part#  ACS-0100, 
manufacturers part# ZBN036102Y,  and solder it in place of the existing cells. 
The  3-cell  pack is located on the component side of the main board about  in 
the center left to right,  and near the top.  OK, I hear you ask, how do I get 
the  thing  apart?  Well,  before  doing  ANYTHING  inside,  I  wholeheartedly 
recommend  getting  the  "TRS-80 Model 100  Technical  Reference  Manual",  RS 
catalog  # 26-3810.  For you more adventurous types,  grab your phillips  head 
screwdriver and follow me.  Turn the M100 over so it is laying face down on  a 
soft surface.  I used a towel on the table. There are 4 screws at the corners. 
Remove  them  and put them where you can find them again.  Turn the Model  100 
over  so  it is again facing you with keyboard up.  Now comes the  hard  part, 
separating the two halves of the case.  Gently, but firmly (as the tech manual 
sez),  pry the covers apart using ONLY your fingers! Careful! There are things 
inside  which  can  be damaged.  There are plastic clips  which  you  have  to 
separate here which can be a bit difficult. Once the case is open a little, be 
careful.  There are wires connecting the two halves together.  They will be on 
the  right side as you lift the top,  so turn the top over and to the right so 
as  to not pull on the cables.  Now what you should be looking at is  the  CPU 
board  fastened  to  the back (the dark brown side),  some  cables  and  wires 
connecting the two halves,  and the keyboard,  LCD, and buzzer fastened to the 
top  half (the light beige side).  Remove the connectors from the main  board. 
Wanna clean the keyboard while we're here?  Sure,  you do.  There are 5 screws 
holding it to the top.  One at each corner,  and one in the center at the top. 
Remove  them,  and lift the keyboard from the case.  Pull the keytops off  the 
switch posts, and use the vacuum cleaner you already had ready to get the dust 
and  such  out of the works.  Please try to put the keytops back in  the  same 
place!  Draw  yourself  a map if need be,  or you will cause  yourself  untold 
grief.  If you haven't done it yet,  take a break and go down to the drugstore 
and  pick up dental rubber bands,  a lot,  each,  at least one for each switch 
post anyway, you know, the kind which are used for holding braces on teeth and 
that  friend of yours shot at you in grammar school.  These are little  rubber 
bands about 1/4 inch in diameter. Put one around each of the switch posts that 
the  keytops  go on.  They will make the keys MUCH quieter and easier  on  the 
fingers as well.  (Thanks to Alan Trick for this) No,  you cannot do  anything 
about  the  function  keys.  Those  little devils  are  click-type  diaphraghm 
switches  commonly  found  in calculator keyboards  (like  that  Bowmar  Brain 
gathering  dust  in  your closet).  If one of these babies goes  bad  on  you, 
replace it, as there is no way to clean them which I know of that works. Order 
RS part# AS-7570, manufacturers part# SK0101X10A. It is extremely difficult to 
remove,  so  be  EXTRA careful.  I recommend a good "solder sucker",  a  small 
wattage  soldering iron,  and a LOT of patience,  else,  to  paraphrase  SYSOP 
^Dave^,  "lack of patience begets patients",  i.e.  you and your dear departed 
Model 100.  Remember, RS is going to charge you an arm and a leg, if not other 
parts of your body,  to fix your mistakes, that is, if they even will touch it 
after you've fooled with it!

     Now  for  some  more information on the power supply and how  it  behaves 
under the trying circumstances that you are putting it through.  The  internal 
power  supply is essentially a DC-DC converter which takes the single  supply, 
+5 or so, and synthetically produces two supplies, a +5 and a -5 supply. It is 
a neat trick how they do this, but the discussion is not appropriate for here, 
more  geared to the hardware guru as it were.  So,  it takes the single supply 
voltage,  and  it makes two out of it.  Power is then applied to  the  various 
parts of the main board to get the thing to do something i.e.,  "wake up",  so 
to speak.  What is important here is what happens when you turn it "off".  You 
may  have  noticed that the "low battery" LED winks at you after you "hit  the 
switch". This is perfectly normal. Here is what is happening. You turn off the 
switch,  there is a capacitor across the input terminal of the converter.  The 
converter now starts using this capacitor as a temporary power supply,  like a 
real  sort term battery.  Of course,  it will not last very  long.  The  sense 
circuit looks at the voltage on the power bus.  At 4.1 volts +/- 0.1 volts, it 
triggers  a  transistor to turn on the low battery LED.  At 3.7 volts  +/- 0.1 
volts, the sense circuit turns off the oscillator circuit which is driving the 
DC-DC  converter.  At this point,  RAM is placed in a "minimum  power"  state, 
analagous  to  tri-state devices being put into the high-impedence  state.  In 
other  words,  tell  the chips to turn themselves "off" by  setting  the  chip 
select line to a logic zero,  which is the turn off condition anyway.  Ok,  so 
what this all means is that on a loss of power,  for whatever reason,  the low 
battery LED lights,  the RAM is placed in an "off" state,  and the rest of the 
machine dies,  including the LED,  and,  well, everything, almost. Placing the 
RAM  in  the  "off" state really means that the chips  disregard  ALL  inputs, 
except for the CS (chip select) line,  and "you guys are on your own. Keep the 
faith.  So long,  and farewell.  We'll be in touch." The beautiful part of all 
this will be revealed shortly. Put in the following program and run it.

     100 x=x+1
     110 print x
     120 for y=1 to 1000
     130 next y
     140 goto 100

     This  is  a  BAD example of programming as it places the  machine  in  an 
"infinite loop".  It counts,  pauses, and counts, forever or until the machine 
dies of its own accord. Anyway, while you are running this, look at the number 
in  the  display,  turn  the on/off switch to "off" and watch  it  die.  Then, 
sometime  later,  turn  the switch back "on" and watch it  resume  EGG-ZACT-LY 
where  it  was when you hit the switch.  Now that the demo is  over,  hit  the 
BREAK,  and  break out of the loop,  or it will go on forever,  on until  your 
Model 100 dies  of natural causes. You wouldn't want that, now would you?

     Ok,  that about does it for this installment. I have received suggestions 
about including programming tips here as well. Watch for forthcoming issues of 
POWER4.xxx and see what develops.

     Let me know of your experiences and/or your inputs with and for the Model 
100.  I will incorporate them if I can, and give you the credit in the text as 
I  have  done for the ones who contributed so far,  though Janet  McC  did  so 
unwittingly.  Thanks, Janet! For putting up the problem you had, and those who 
responded to a damsel in distress. So, now, I have a problem ... what is to be 
the  next  topic of POWER4.xxx?  I am at a loss.  I have now  covered  between 
POWER4.100  and this file,  all of the suggested items for this type of  file. 
Where now? Feedback, I need it!

                                        Ralph V. Getsla
                                        [74405,1177]
